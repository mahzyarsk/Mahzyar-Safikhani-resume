<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mahzyar Safikhani - Resume</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Ù…Ù‡Ø²ÛŒØ§Ø± ØµÙÛŒ Ø®Ø§Ù†ÛŒ</h1>
            <address>
                <p>Ø§ÛŒÙ…ÛŒÙ„: <a href="mailto:Mahzyar.safikhani@gmail.com">Mahzyar.safikhani@gmail.com</a></p>
                <p>Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨: <a href="https://github.com/mahzyarsk" target="_blank">https://github.com/mahzyarsk</a></p>
                <p>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ : <a>09166197229</a></p>
            </address>
            <div id="onlineUsers" class="online-users">
                <span>ğŸ‘¥ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¢Ù†Ù„Ø§ÛŒÙ†: </span>
                <span id="onlineCount">0</span>
            </div>
        </header>

        <main>
            <section id="summary">
                <h2>Ø®Ù„Ø§ØµÙ‡</h2>
                <article>
                     
                <p>Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ Ø¨Ù‡ Ø­ÙˆØ²Ù‡ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ±ØŒ Ù…ØªÙˆÙ„Ø¯ Ø§Ù‡ÙˆØ§Ø². Ø¯Ø§Ø±Ø§ÛŒ Ù…Ø¯Ø±Ú© Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± Ùˆ ØªØ¬Ø±Ø¨Ù‡ Ø¹Ù…Ù„ÛŒ Ø¯Ø± ØªÙˆØ³Ø¹Ù‡ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ø¯Ø± Ø´Ø±Ú©Øª Ø®ØµÙˆØµÛŒ.</p>

                </article>
               
            </section>

            <section id="experience">
                <h2>ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±ÛŒ</h2>
                <article>
                    <h3>Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ - Ø´Ø±Ú©Øª Ø·Ø¨ Ùˆ Ø±Ø§ÛŒØ§Ù†Ù‡</h3>
                    <p><strong>Ø¯ÙˆØ±Ù‡:</strong> 1400 - ØªØ§Ú©Ù†ÙˆÙ†</p>
                    <ul>
                        <li>ØªÙˆØ³Ø¹Ù‡ Ùˆ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø´Ø±Ú©Øª.</li>
                    </ul>
                </article>
            </section>

            <section id="education">
                <h2>ØªØ­ØµÛŒÙ„Ø§Øª</h2>
                <article>
                    <h3>Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± (Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ) - Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø´Ù‡ÛŒØ¯ Ú†Ù…Ø±Ø§Ù† Ø§Ù‡ÙˆØ§Ø²</h3>
                    <p><strong>Ø¯ÙˆØ±Ù‡:</strong> 1400 - 1404</p>
                </article>
            </section>

            <section id="skills">
                <h2>Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§</h2>
                <ul>
                    <li>Ø¬Ø§ÙˆØ§ (Ù…Ø³Ù„Ø·)</li>
                    <li>Ù¾Ø§ÛŒØªÙˆÙ† (Ù…Ø³Ù„Ø·)</li>
                    <li>C# Ùˆ ÙØ±ÛŒÙ…â€ŒÙˆØ±Ú© .NET</li>
                    <li>C++</li>
                    <li>HTML</li>
                    <li>CSS</li>
                </ul>
            </section>

            <section id="project-request">
                <h2>Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù¾Ø±ÙˆÚ˜Ù‡</h2>
                <article>
                    <form id="projectRequestForm" class="project-form">
                        <div class="form-group">
                            <label for="name">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ *</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Ø§ÛŒÙ…ÛŒÙ„ *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        <div class="form-group">
                            <label for="project_type">Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡</label>
                            <select id="project_type" name="project_type">
                                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                <option value="web">ØªÙˆØ³Ø¹Ù‡ ÙˆØ¨</option>
                                <option value="mobile">Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…ÙˆØ¨Ø§ÛŒÙ„</option>
                                <option value="desktop">Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ø¯Ø³Ú©ØªØ§Ù¾</option>
                                <option value="api">API Ùˆ Backend</option>
                                <option value="other">Ø³Ø§ÛŒØ±</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="budget">Ø¨ÙˆØ¯Ø¬Ù‡ ØªÙ‚Ø±ÛŒØ¨ÛŒ</label>
                            <select id="budget" name="budget">
                                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                <option value="under-5m">Ø²ÛŒØ± Ûµ Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†</option>
                                <option value="5-10m">Ûµ ØªØ§ Û±Û° Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†</option>
                                <option value="10-20m">Û±Û° ØªØ§ Û²Û° Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†</option>
                                <option value="20-50m">Û²Û° ØªØ§ ÛµÛ° Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†</option>
                                <option value="over-50m">Ø¨Ø§Ù„Ø§ÛŒ ÛµÛ° Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="description">ØªÙˆØ¶ÛŒØ­Ø§Øª Ù¾Ø±ÙˆÚ˜Ù‡ *</label>
                            <textarea id="description" name="description" rows="5" required></textarea>
                        </div>
                        <div id="formMessage" class="form-message"></div>
                        <button type="submit" class="submit-btn">Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª</button>
                    </form>
                </article>
            </section>
        </main>
    </div>

    <script>
        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª API - Ø§ÛŒÙ† Ø¢Ø¯Ø±Ø³ Ø±Ø§ Ø¨Ø§ Ø¢Ø¯Ø±Ø³ Ø³Ø±ÙˆØ± Ø®ÙˆØ¯ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯
        const API_BASE = 'http://localhost:8000';  // Ø¯Ø± production Ø¢Ø¯Ø±Ø³ Ø³Ø±ÙˆØ± ÙˆØ§Ù‚Ø¹ÛŒ Ø±Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯
        
        // Ø§ØªØµØ§Ù„ WebSocket Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¢Ù†Ù„Ø§ÛŒÙ†
        let ws = null;
        
        function connectWebSocket() {
            const wsUrl = API_BASE.replace('http://', 'ws://').replace('https://', 'wss://') + '/ws';
            
            try {
                ws = new WebSocket(wsUrl);
                
                ws.onopen = () => {
                    console.log('WebSocket connected');
                };
                
                ws.onmessage = (event) => {
                    const data = JSON.parse(event.data);
                    if (data.type === 'online_count') {
                        document.getElementById('onlineCount').textContent = data.count;
                    }
                };
                
                ws.onerror = (error) => {
                    console.error('WebSocket error:', error);
                    // Ø¯Ø± ØµÙˆØ±Øª Ø®Ø·Ø§ØŒ Ø§Ø² API Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                    fetchOnlineCount();
                };
                
                ws.onclose = () => {
                    console.log('WebSocket disconnected, reconnecting...');
                    setTimeout(connectWebSocket, 3000);
                };
            } catch (error) {
                console.error('Failed to connect WebSocket:', error);
                fetchOnlineCount();
            }
        }
        
        // Ø¯Ø± ØµÙˆØ±Øª Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ WebSocketØŒ Ø§Ø² API Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
        async function fetchOnlineCount() {
            try {
                const response = await fetch(`${API_BASE}/api/online-count`);
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('onlineCount').textContent = data.count;
                }
            } catch (error) {
                console.error('Failed to fetch online count:', error);
            }
        }
        
        // Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù¾Ø±ÙˆÚ˜Ù‡
        document.getElementById('projectRequestForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value || null,
                project_type: document.getElementById('project_type').value || null,
                budget: document.getElementById('budget').value || null,
                description: document.getElementById('description').value
            };
            
            const messageDiv = document.getElementById('formMessage');
            const submitBtn = document.querySelector('.submit-btn');
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...';
            messageDiv.className = 'form-message';
            messageDiv.textContent = '';
            
            try {
                const response = await fetch(`${API_BASE}/api/requests`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                if (response.ok) {
                    messageDiv.className = 'form-message success';
                    messageDiv.textContent = 'Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯. Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³ Ø®ÙˆØ§Ù‡ÛŒÙ… Ú¯Ø±ÙØª.';
                    document.getElementById('projectRequestForm').reset();
                } else {
                    const error = await response.json();
                    messageDiv.className = 'form-message error';
                    messageDiv.textContent = error.detail || 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.';
                }
            } catch (error) {
                messageDiv.className = 'form-message error';
                messageDiv.textContent = 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±. Ù„Ø·ÙØ§Ù‹ Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª';
            }
        });
        
        // Ø§ØªØµØ§Ù„ WebSocket Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡
        connectWebSocket();
        
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† (fallback)
        setInterval(fetchOnlineCount, 10000);
    </script>
</body>
</html>